# Compiler
FC = mpif90
LD	= $(FC)
RM	= /bin/rm -f

# Paths (Modify if necessary)
CUDECOMP_DIR = /home/milton/MHIT36_cuDecomp/cuDecomp/build/

# Compiler and Linker Flags
FFLAGS = -fast -acc -gpu=managed -Minfo=accel -Mfree -Mpreprocess -cpp -Minfo=accel -cuda  -I$(CUDECOMP_DIR)/include
LIBS = -L$(CUDECOMP_DIR)/lib -L/usr/local/cuda/lib64 -lcudecomp_fort -lcudecomp -cudalib=cufft -lcuda

# Source and Object Files
OBJS = poisson_opt.f90
EXEC = poisson

$(EXEC):	$(OBJS)
	$(LD) $(FFLAGS) $(OBJS) $(LIBS) -o $@

clean:
	$(RM) $(EXEC)

.SUFFIXES: .o

.f90.o:
	$(FC)  -c $(FFLAGS) $<
